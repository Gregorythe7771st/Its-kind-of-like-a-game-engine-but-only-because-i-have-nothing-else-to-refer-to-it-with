<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Terrain generator</title>
    <style>
        canvas{
            background-color: black;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        body{
            background-color: #555555;
        }
        
        #generate{
            position: fixed;
            top: 70%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        textarea{
            position: fixed;
            top: 75%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        #load{
            position: fixed;
            top: 77%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        #copy{
            position: fixed;
            top: 72%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
    </style>
</head>
<body>
    <canvas height="500px" width="500px" id="canvas"></canvas>
    <button id="generate" onclick="generateTerrain()">Regenerate</button>
    <button id="load" onclick="load()">load</button>
    <button id="copy" onclick="copy()">copy terrain</button>
    <textarea></textarea>
    <script>
        
        var canvas = document.getElementById('canvas');
        var ctx = canvas.getContext('2d');
        
        let startingPoint = 250 + (Math.random() * 2 - 1) * 50;
        
        let map = [startingPoint];
        
        let waterLevel = 250 + (Math.random() * 2 - 1) * 50;
        
        for(let i = 1; i < 501; i++) {
            var randomJiggle = (Math.random() * 2 - 1) * 5
           map[i] = map[i - 1] + randomJiggle
           
           if(map[i] <= waterLevel) {
            ctx.strokeStyle = "rgb(60, 40, 20)"
           
            ctx.beginPath()
            ctx.moveTo(i, 500)
            ctx.lineTo(i, map[i])
            ctx.stroke()
            ctx.strokeStyle = "rgb(0, 200, 255)"
            ctx.beginPath()
            ctx.moveTo(i, map[i])
            ctx.lineTo(i, 0)
            ctx.stroke()                       
            } else {
                ctx.strokeStyle = "rgb(60, 40, 20)"
                ctx.beginPath()
                ctx.moveTo(i, 500)
                ctx.lineTo(i, map[i])
                ctx.stroke()                
                ctx.strokeStyle = 'blue'
                ctx.beginPath()
                ctx.moveTo(i, map[i])
                ctx.lineTo(i, waterLevel)
                ctx.stroke()
                ctx.strokeStyle = "rgb(0, 200, 255)"
            ctx.beginPath()
            ctx.moveTo(i, waterLevel)
            ctx.lineTo(i, 0)
            ctx.stroke()                                           
               }
           
        }                        

        function generateTerrain() {                 
                
        ctx.clearRect(0, 0, 500, 500)
        
        startingPoint = 250 + (Math.random() * 2 - 1) * 50
        
        map = [startingPoint];
        
        waterLevel = 250 + (Math.random() * 2 - 1) * 50
                
        for(let i = 1; i < 501; i++){
           var randomJiggle = (Math.random() * 2 - 1) * 5
           map[i] = map[i - 1] + randomJiggle
                             
           
           if(map[i] <= waterLevel) {
            ctx.strokeStyle = "rgb(60, 40, 20)"
           
            ctx.beginPath()
            ctx.moveTo(i, 500)
            ctx.lineTo(i, map[i])
            ctx.stroke()
            ctx.strokeStyle = "rgb(0, 200, 255)"
            ctx.beginPath()
            ctx.moveTo(i, map[i])
            ctx.lineTo(i, 0)
            ctx.stroke()                       
            } else {
                ctx.strokeStyle = "rgb(60, 40, 20)"
                ctx.beginPath()
                ctx.moveTo(i, 500)
                ctx.lineTo(i, map[i])
                ctx.stroke()                
                ctx.strokeStyle = 'blue'
                ctx.beginPath()
                ctx.moveTo(i, map[i])
                ctx.lineTo(i, waterLevel)
                ctx.stroke()
                ctx.strokeStyle = "rgb(0, 200, 255)"
            ctx.beginPath()
            ctx.moveTo(i, waterLevel)
            ctx.lineTo(i, 0)
            ctx.stroke()                                           
               } 
            }                    
        }                                
 
    
    function load() {
    
       ctx.clearRect(0, 0, 500, 500)
    
       var input = document.querySelector('textarea').value
       eval(input)
       
       for(let i = 0; i < 501; i++) {
       
            if(map[i] <= waterLevel) {
            ctx.strokeStyle = "rgb(60, 40, 20)"
           
            ctx.beginPath()
            ctx.moveTo(i, 500)
            ctx.lineTo(i, map[i])
            ctx.stroke()
            ctx.strokeStyle = "rgb(0, 200, 255)"
            ctx.beginPath()
            ctx.moveTo(i, map[i])
            ctx.lineTo(i, 0)
            ctx.stroke()                       
            } else {
                ctx.strokeStyle = "rgb(60, 40, 20)"
                ctx.beginPath()
                ctx.moveTo(i, 500)
                ctx.lineTo(i, map[i])
                ctx.stroke()                
                ctx.strokeStyle = 'blue'
                ctx.beginPath()
                ctx.moveTo(i, map[i])
                ctx.lineTo(i, waterLevel)
                ctx.stroke()
                ctx.strokeStyle = "rgb(0, 200, 255)"
            ctx.beginPath()
            ctx.moveTo(i, waterLevel)
            ctx.lineTo(i, 0)
            ctx.stroke()                                            
            }
        }
    }
    
    function copy() {                    
                navigator.clipboard.writeText('map = ' + '[' + map + ']' + '; waterLevel = ' + waterLevel) 
                                                       
    }                 
</script>
